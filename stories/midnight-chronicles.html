<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Midnight Chronicles | Talevo</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="midnight.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    .story-controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 30px;
    }
    .story-controls button {
      padding: 10px 20px;
      border: none;
      background: #1e293b;
      color: white;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }
    .story-controls button:hover {
      background: #3b82f6;
      transform: translateY(-2px);
    }
    .loading-indicator {
      text-align: center;
      padding: 2rem;
      font-size: 1.2rem;
      color: #ccc;
    }
  </style>
</head>
<body class="dark-mode story-page">
  <main class="container midnight-theme">
    <img src="midnight-bg.png" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1;" />
    <header class="story-header">
      <div class="logo-container">
        <a href="https://talevo-2.vercel.app/" class="logo">
          <svg class="logo-svg" viewBox="0 0 200 60">
            <path d="M10,15 Q30,5 60,10 T100,10 T140,10 T190,15 Q200,30 190,45 T140,50 T100,50 T60,50 Q30,55 10,45 Q0,30 10,15" fill="none" stroke="currentColor" stroke-width="2"></path>
            <text fill="currentColor" font-size="26" font-weight="bold" x="50" y="36" letter-spacing="2">Talevo</text>
            <circle class="star star1" cx="25" cy="25" fill="currentColor" r="3"></circle>
            <circle class="star star2" cx="175" cy="20" fill="currentColor" r="2.5"></circle>
            <circle class="star star3" cx="155" cy="40" fill="currentColor" r="2"></circle>
            <circle class="star star4" cx="40" cy="45" fill="currentColor" r="1.5"></circle>
            <circle class="star star5" cx="130" cy="15" fill="currentColor" r="2"></circle>
            <circle class="star star6" cx="100" cy="48" fill="currentColor" r="1"></circle>
            <circle class="star star7" cx="180" cy="35" fill="currentColor" r="1"></circle>
          </svg>
        </a>
      </div>
      <div class="story-nav">
<!--         <a href="https://talevo.netlify.app/" class="back">
          <button class="btn btn-icon" id="backBtn"><i class="fas fa-arrow-left"></i></button>
        </a> -->
        <div class="story-title">Midnight Chronicles</div>
        <div class="story-controls">
          
<a href="https://talevo-2.vercel.app/" class="btn btn-icon" id="bookmarkBtn">
  <i class="fas fa-home"></i>
</a>
          <button class="btn btn-icon" id="shareBtn"><i class="fas fa-share-alt"></i></button>
        </div>
      </div>
    </header>
    <main class="container">
      <div id="loader" class="loading-indicator">Loading story...</div>
      <div class="story-container" id="story-container" style="display: none;"></div>

      <!-- Ending chapters (HTML only) -->
  
    
    <div class="story-chapter hidden" id="ending-1">
  <div class="chapter-image">
    <img src="/api/placeholder/400/250" alt="Dawn of Victory">
  </div>
  <h2 class="chapter-title">Ending: Dawn of Victory</h2>
  <div class="chapter-text">
    <p>Your combined power blazed like a star in the darkness, and the entity's screams shook the very foundations of reality as it was banished back to the void. The covenant was reborn, stronger than ever, forged not from duty alone but from willing sacrifice and the bonds of fellowship.</p>
    <p>Thomas Blackwood stood beside you as the first rays of dawn broke through the dissipating shadows. Together, you had not only stopped the ancient evil but found a way to bind it permanently, ensuring that future generations would never face this terror again.</p>
    <p>Ravenhollow awakened to a world cleansed, and the villagers spoke of the night when two young guardians restored the light to their darkest hour. The manor, once a prison of shadows, became a beacon of hope.</p>
    <p><strong>THE END</strong></p>
  </div>
  <div class="story-restart">
    <button class="restart-btn">Start Over</button>
  </div>
</div>

<div class="story-chapter hidden" id="ending-2">
  <div class="chapter-image">
    <img src="/api/placeholder/400/250" alt="The Binding Eternal">
  </div>
  <h2 class="chapter-title">Ending: The Binding Eternal</h2>
  <div class="chapter-text">
    <p>Following Cordelia's notes and your own intuition, you managed to complete her final ritual. The entity was not destroyed—such beings cannot truly die—but it was bound so completely that it would slumber for a thousand years or more.</p>
    <p>The cost was everything. Your life force was woven into the binding, and you felt yourself fading even as the darkness receded. But you had saved not just Ravenhollow, but the entire world from a hunger that would have consumed everything.</p>
    <p>Your spirit joined those of the guardians who came before, watching over the seal and ensuring that if the entity ever stirred again, someone would be there to stand against it. In death, you found a purpose greater than life.</p>
    <p>The village erected a monument in your honor, though few would ever know the full truth of what you sacrificed. But the world turned on, safe and bright, because you chose to stand in the darkness.</p>
    <p><strong>THE END</strong></p>
  </div>
  <div class="story-restart">
    <button class="restart-btn">Start Over</button>
  </div>
</div>

<div class="story-chapter hidden" id="ending-3">
  <div class="chapter-image">
    <img src="/api/placeholder/400/250" alt="The Dark Transformation">
  </div>
  <h2 class="chapter-title">Ending: The Dark Transformation</h2>
  <div class="chapter-text">
    <p>The entity's power flowed through you like molten darkness, changing you at the most fundamental level. You were no longer entirely human, but you were no longer entirely helpless either. The creature found itself bound to your will, its hunger now yours to command.</p>
    <p>With this terrible power, you reshaped the rules of the game. The entity would feed, yes, but only on those who deserved its attention—the cruel, the corrupt, the irredeemably evil. You became judge, jury, and executioner, walking the line between salvation and damnation.</p>
    <p>Ravenhollow whispered stories of the Shadow Guardian who emerged from Blackthorn Manor, protecting the innocent and punishing the wicked with supernatural just ice. You had become something new—neither fully human nor entirely monster, but a guardian who understood both light and shadow.</p>
  <p>Years passed, and the entity's influence over you grew stronger, but so did your mastery over it. You walked a razor's edge between salvation and corruption, knowing that one day you might become the very thing you once fought against. But for now, the world was safer, even if the cost was your own soul.</p>
  <p>In the deepest part of your transformed heart, you wondered if this was always how it was meant to end—not with victory or defeat, but with the eternal dance between light and darkness, played out in a single, tortured soul.</p>
  <p><strong>THE END</strong></p>
</div>
  <div class="story-restart">
    <button class="restart-btn">Start Over</button>
  </div>
</div>

<!-- Ending 4 -->
<div class="story-chapter hidden" id="ending-4">
  <div class="chapter-image">
    <img src="/api/placeholder/400/250" alt="The Escape">
  </div>
  <h2 class="chapter-title">Ending: The Escape</h2>
  <div class="chapter-text">
    <p>Sometimes wisdom lies not in fighting the impossible, but in knowing when to run. You grabbed what you could from Cordelia's research and fled Blackthorn Manor as the entity's rage shook the very stones of the building.</p>
    <p>Racing through the forest with dawn breaking behind you, you carried the terrible knowledge of what lurked in Ravenhollow's heart. The entity remained trapped—for now—but the seals were weakening, and eventually, someone would have to return to finish what you couldn't.</p>
    <p>You spent years traveling, researching, preparing. You found others who had encountered similar entities, learned of weapons and rituals that might prove more effective. The guilt of leaving Ravenhollow haunted your dreams, but you knew that rushing to your death would have saved no one.</p>
    <p>When you finally returned, older and wiser, you brought with you an army of fellow guardians and the knowledge needed to end the threat once and for all. Sometimes retreat is just a longer path to victory.</p>
    <p><strong>TO BE CONTINUED...</strong></p>
  </div>
  <div class="story-restart">
    <button class="restart-btn">Start Over</button>
  </div>
</div>

<!-- Ending 5 -->
<div class="story-chapter hidden" id="ending-5">
  <div class="chapter-image">
    <img src="/api/placeholder/400/250" alt="The Eternal Guardian">
  </div>
  <h2 class="chapter-title">Ending: The Eternal Guardian</h2>
  <div class="chapter-text">
    <p>You made the ultimate choice—to become the seal itself. Using Cordelia's incomplete ritual as a foundation, you bound your very essence to the manor, creating a living prison that the entity could never escape.</p>
    <p>Your body became incorporeal, your consciousness spread throughout every stone and timber of Blackthorn Manor. You felt everything—every whisper of wind through broken windows, every footstep of curious visitors, every pulse of the entity's frustrated rage as it tested the boundaries of its new cage.</p>
    <p>Decades passed like moments and moments stretched like years. Visitors came and went, some sensing your presence, others dismissing the manor as merely haunted. You watched over them all, protecting them from the true horror that dwelt in the depths while slowly growing stronger in your ghostly vigil.</p>
    <p>The entity still whispered promises of power and freedom, but you had found something greater—purpose without end, protection without compromise. You had become Ravenhollow's eternal guardian, and though you could never leave, you had ensured that the darkness would never escape either.</p>
    <p>In the quiet moments between visitors, you sometimes wondered if this was peace or purgatory. But when children played safely in the village below, their laughter carried on the wind, you knew you had chosen correctly.</p>
    <p><strong>THE END</strong></p>
  </div>
  <div class="story-restart">
    <button class="restart-btn">Start Over</button>
  </div>
</div>

  </div>
      
  </main>
    
  <script src="script.js"></script>
  <script>
    // Complete story loading and navigation script
async function loadStoryFromJSON() {
  try {
    const response = await fetch("midnight-chronicles.json");
    const storyData = await response.json();
    const container = document.getElementById("story-container");
    const loader = document.getElementById("loader");

    // Clear container first
    container.innerHTML = '';

    storyData.forEach((chapter) => {
      if (chapter.id.startsWith("ending-")) return; // Skip endings from JSON as they're in HTML

      const chapterDiv = document.createElement("div");
      chapterDiv.classList.add("story-chapter");
      chapterDiv.id = chapter.id;
      if (chapter.id !== "chapter-1") chapterDiv.classList.add("hidden");

      chapterDiv.innerHTML = `
        <div class="chapter-image">
          <img src="${chapter.image}" alt="Chapter image" />
        </div>
        <h2 class="chapter-title">${chapter.title}</h2>
        <div class="chapter-text">
          ${chapter.text.map((p) => `<p>${p}</p>`).join("")}
        </div>
        <div class="story-choices">
          <h3>What will you do?</h3>
          <div class="choice-options">
            ${chapter.choices
              .map(
                (choice) => `
              <button class="choice-btn" data-next="${choice.next}">
                ${choice.text}
              </button>`
              )
              .join("")}
          </div>
        </div>
      `;
      container.appendChild(chapterDiv);
    });

    // Hide loader and show content
    loader.style.display = "none";
    container.style.display = "block";

    // Initialize story functionality
    initStoryChoiceButtons();
    initRestartButtons();
    
    // Load saved progress if exists
    loadSavedProgress();
    
  } catch (error) {
    console.error("Error loading story:", error);
    document.getElementById("loader").innerHTML = "Error loading story. Please refresh the page.";
  }
}

function initStoryChoiceButtons() {
  document.addEventListener("click", function(e) {
    if (e.target.classList.contains("choice-btn")) {
      const nextChapter = e.target.getAttribute("data-next");
      navigateToChapter(nextChapter);
    }
  });
}

function initRestartButtons() {
  document.addEventListener("click", function(e) {
    if (e.target.classList.contains("restart-btn")) {
      restartStory();
    }
  });
}

function navigateToChapter(chapterId) {
  // Hide all chapters
  document.querySelectorAll(".story-chapter").forEach((chapter) => {
    chapter.classList.add("hidden");
  });

  // Show target chapter
  const targetChapter = document.getElementById(chapterId);
  if (targetChapter) {
    targetChapter.classList.remove("hidden");
    window.scrollTo({ top: 0, behavior: 'smooth' });
    
    // Save progress
    saveProgress(chapterId);
  } else {
    console.error(`Chapter ${chapterId} not found`);
  }
}

function restartStory() {
  // Clear saved progress
  localStorage.removeItem("currentChapter");
  localStorage.removeItem("storyProgress");
  
  // Navigate to first chapter
  navigateToChapter("chapter-1");
}

function saveProgress(chapterId) {
  localStorage.setItem("currentChapter", chapterId);
  
  // Save timestamp for progress tracking
  const progress = {
    currentChapter: chapterId,
    timestamp: new Date().toISOString(),
    storyTitle: "The Enchanted Forest"
  };
  localStorage.setItem("storyProgress", JSON.stringify(progress));
}

function loadSavedProgress() {
  const savedChapter = localStorage.getItem("currentChapter");
  if (savedChapter && document.getElementById(savedChapter)) {
    navigateToChapter(savedChapter);
  }
}

// Bookmark functionality
function initBookmarkButton() {
  const bookmarkBtn = document.getElementById("bookmarkBtn");
  if (bookmarkBtn) {
    bookmarkBtn.addEventListener("click", function() {
      const currentChapter = document.querySelector(".story-chapter:not(.hidden)");
      if (currentChapter) {
        saveProgress(currentChapter.id);
        
        // Visual feedback
        const icon = bookmarkBtn.querySelector("i");
        icon.classList.remove("far");
        icon.classList.add("fas");
        
        setTimeout(() => {
          icon.classList.remove("fas");
          icon.classList.add("far");
        }, 2000);
        
        // Show notification (optional)
        showNotification("Progress saved!");
      }
    });
  }
}

// Share functionality
function initShareButton() {
  const shareBtn = document.getElementById("shareBtn");
  if (shareBtn) {
    shareBtn.addEventListener("click", function() {
      if (navigator.share) {
        navigator.share({
          title: "The Enchanted Forest - Interactive Story",
          text: "Check out this amazing interactive story!",
          url: window.location.href
        });
      } else {
        // Fallback: copy to clipboard
        navigator.clipboard.writeText(window.location.href).then(() => {
          showNotification("Link copied to clipboard!");
        });
      }
    });
  }
}

// Notification system
function showNotification(message) {
  const notification = document.createElement("div");
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: #1e293b;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 1000;
    animation: slideIn 0.3s ease;
  `;
  notification.textContent = message;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.style.animation = "slideOut 0.3s ease";
    setTimeout(() => {
      document.body.removeChild(notification);
    }, 300);
  }, 3000);
}

// Add CSS for notifications
const notificationStyles = document.createElement("style");
notificationStyles.textContent = `
  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  @keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
  }
`;
document.head.appendChild(notificationStyles);

// Initialize everything when DOM is loaded
document.addEventListener("DOMContentLoaded", function() {
  loadStoryFromJSON();
  initBookmarkButton();
  initShareButton();
});
  </script>
  </main>
</body>
</html>
  
